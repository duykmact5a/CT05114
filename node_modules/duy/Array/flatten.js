function flatten(list,shallow,array){
    if(!array) array = [];
    if (shallow) return array.concat.apply(array,list);
    for(var i=0; i<list.length; i++){
        if(list[i].constructor == Array) flatten(list[i],shallow,array);
        else array.push(list[i]);
    }
    return array;
}
console.log(flatten([1, [2], [3, [[4]]],[5,6]])); 